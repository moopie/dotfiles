"This must be first, because it changes other options as side effect
set nocompatible
set background=dark

" Windows specific stuff
if has('win32')
    behave mswin
    set term=xterm
    set t_Co=256
    let &t_AB="\e[48;5;%dm"
    let &t_AF="\e[38;5;%dm"

    " set rtp for windows because it is not set to the place we want
    set rtp+=~/.vim/
endif

" GUI
if has("gui_running")
    set anti enc=utf-8
    if has('win32')
        set guifont=Consolas:h9
    else
        set guifont=Inconsolata\ 10
    endif
    set guioptions-=m  " Remove menu bar
    set guioptions-=T  " Remove toolbar
    set guioptions-=r  " Remove right-hand scroll bar
    set guioptions-=l
    set guioptions-=b
    set guioptions-=L
endif

" Properties
set number          " Show line numbers
set encoding=utf8
set showcmd         " Display an incomplete command in the lower right corner of the Vim window
set shortmess=atI   " Shortens messages
set showmatch       " Show matching brackets
set ruler

" Highlight 80th column
set colorcolumn=80
hi ColorColumn guibg=#2d2d2d ctermbg=246

" Tabs & Spaces
set expandtab     " Use spaces instead of tabs
set tabstop=4     " A tab is 4 spaces
set autoindent    " Always set autoindenting on
set copyindent    " Copy the previous indentation on autoindenting
set shiftwidth=4  " Number of spaces to use for autoindenting
set smarttab      " Insert tabs on the start of a line according to shiftwidth, not tabstop

" Search
set ignorecase    " Ignore case when searching
set smartcase     " Ignore case if search pattern is all lowercase, case-sensitive otherwise
set hlsearch      " Highlight search terms
set incsearch     " Show search matches as you type

" Autosave
set swapfile
set backup
set backupdir=~/.vim/backup
set directory=~/.vim/temp

" No annoyances
set novisualbell    " No blinking
set noerrorbells    " No noise.
set vb t_vb=        " Disable any beeps or flashes on error

" Mouse
set mouse-=a   " Disable mouse
set mousehide  " Hide mouse after chars typed

" Mappings
" Cleans hilighted text after search
nmap <silent> <leader>/ :nohlsearch<CR>

" Plugins
call plug#begin('~/.vim/plugins')

" Git
Plug 'tpope/vim-fugitive'
Plug 'airblade/vim-gitgutter'

" Emmet
Plug 'mattn/emmet-vim'

" File browser
Plug 'scrooloose/nerdtree'

" Commenting stuff
Plug 'scrooloose/nerdcommenter'

" Plugins that only work on unix
if has("unix")
    " Autocompletion
    Plug 'Valloric/YouCompleteMe', { 'do': './install.sh' }
end

" Colorschemes
Plug 'nanotech/jellybeans.vim'

call plug#end()

" set syntax on after vim-plug does it's thing
filetype plugin indent on
syntax on " Enable syntax highlighting

colorscheme jellybeans
